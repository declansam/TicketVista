

<div class="title text-2xl font-heading font-bold mb-4 mt-4 flex justify-center">
    <h1>Book an Event for {{userFound.name}}</h1>
</div>


<div class="admin-error flex justify-center">
    {{#if error}}
        <h1 class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md mb-4 mt-[10px]">
            {{error}}
        </h1>
    {{/if}}
</div>


<!-- Event Table -->
<div class="title text-2xl font-heading font-bold mb-2 mt-1 flex justify-center">
    <h3><em>All Available Events</em></h3>
</div>

{{!-- Filtering Forms --}}
<div class="admin-all-form rounded-md p-4">
    <form method = "GET" class="mb-1">

        {{!-- Description Input --}}
        <br>
        <label for="description-reg-user" class="block text-gray-600 text-sm font-semibold mb-2"> Description: </label>
        <input type="text" name = "description" value = "" placeholder="Search by Event Description" id="description-reg-user" class = "search-area w-full px-3 py-2 border rounded-md mb-2">
    
        
        {{!-- Buttons --}}
        <input type="submit" value = "Filter" class = "submit-button bg-gradient-to-r from-secondary-600 to-tert-700 hover:from-tert-600 hover:to-tert-800 font-button text-white font-semibold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline-tert-300 shadow-md">
        <input type="submit" value="Clear All" class = "submit-button bg-gradient-to-r from-secondary-600 to-tert-700 hover:from-tert-600 hover:to-tert-800 font-button text-white font-semibold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline-tert-300 shadow-md">
    
    </form>
</div>

{{!-- instruction text --}}
<div class="booking-instruction bg-gray-200 rounded-md flex justify-center">
    <p class="text-sm font-semibold text-gray-700"> 
        <em>Click on a row to select an event!</em>
    </p>
</div>

<div class="user-all-table bg-secondary-100 shadow-md rounded-md p-4">
    <table class="w-full font-body">

        <!-- Table Row Header -->
        <tr class="bg-tert-500 text-white">
            <th class="py-2 px-4"> Title </th>
            <th class="py-2 px-4"> Date </th>
            <th class="py-2 px-4"> Venue </th>
            <th class="py-2 px-4"> Description </th>
            <th class="py-2 px-4"> Price ($) </th>
            <th class="py-2 px-4"> Added By </th>
        </tr>

        <!-- Loop through all the events and display relevant columns -->
        {{#each allEvents}}
            <tr class="border-b hover:bg-orange-100 cursor-pointer" onclick="redirectToEvent('{{../userFound.name}}', '{{_id}}')">
                <td class="py-2 px-4"> {{title}} </td>
                <td class="py-2 px-4"> {{date}} </td>
                <td class="py-2 px-4"> {{venue}} </td>
                <td class="py-2 px-4"> {{description}} </td>
                <td class="py-2 px-4"> {{price}} </td>
                <td class="py-2 px-4"> {{addedBy.name}} </td>
            </tr>
        {{/each}}

    </table>
</div>

<script>

    // JavaScript function to redirect to a specific user and event
    function redirectToEvent(username, eventId) {
        window.location.href = `/u/${username}/${eventId}`;
    }

</script>
